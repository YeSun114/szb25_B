# 模型介绍

## 第一问
想要把按照bt2020标准录制的视频放到普通显示器上播放,那么需要进行色与转换, $X_{srgb}=M*X_{bt2020}$ ,为了最小化 $\Delta E$ ,我们需要找到一个合适的M,
其中 $\Delta E$ 是CIELab色与空间所规定的视觉颜色偏差.所需的已知条件有bt2020三原色波长,常用显示器rbg波长,另外两色域空间下白点均取"D65"

使用python的colour-science库来完成

- 从RGB_COLOURSPACES['ITU-R BT.2020']中抽取1000个点,

- $X_{srgb}=M* X_{bt2020}$ 进行转换,转换的约束条件为转换后的色彩必须属于srgb色域空间

- 利用RGB_to_XYZ, XYZ_to_Lab, 将两空间的rgb向量逐步转换成cielab标准表示的色彩向量,然后计算 $\Delta E$ ,

- 优化M使得各个采样点 $Delta E$ 均值最小化

## 第二问

1. 摄像机为了增强色彩捕捉能力,增加了第四通道V;但是四通道册与空间没有统一标准,所以我们将保留bt2020中rgb基色,并通过约束优化的方法(scipy.minimize)求出最优的第四通道基色,使得RGBV对1931CIE马蹄形曲线的色域覆盖面积达到最大.colour-science中没有内值任何四通道或五通道色域空间,但提供了自定义色域空间的接口,比如RGB_Colourspace来自自定色域空间.

2. 定义好四通道摄像机色域空间RGBV后采用类似的办法定义五通道显示器的色域空间:
    - 保留bt2020的rgb基色
    - 找到对CIE1931马蹄形曲线色域覆盖面积最大的第四,第五个基色C和X,构成显示器色域空间RGBCX

3. 从RGBV四通道色域空间采样1000个点,找到最优转移矩阵M(5行4列),使得 $X_{rgbcx}=M*X_{rgbv}$ ,转换后 $\Delta E$ 最小


## 第三问

输入矩阵为
```
A=
[
    [220,0,0],
    [0,220,0],
    [0,0,220],
]
```
第(i,j)个像素点的输出矩阵为
```
B=
[
    [data["R_R"][i,j], data["G_R"][i,j], data["B_R"][i,j]],
    [data["R_G"][i,j], data["G_G"][i,j], data["B_G"][i,j]],
    [data["R_B"][i,j], data["G_B"][i,j], data["B_B"][i,j]],
]
```

$A*M=B$ , $M$ 为该像素点的转移矩阵，利用最小二乘法求出近似转移矩阵并为其求逆即可通过输入 $ A*M^{-1} $ 完成修正。

如果最小二乘法求出的转移矩阵不可逆，我们就用其SVD伪逆来替代。

 
